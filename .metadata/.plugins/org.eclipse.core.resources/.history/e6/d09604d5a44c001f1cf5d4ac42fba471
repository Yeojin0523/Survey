<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<%@ page import="java.util.List" %>
<%@ page import="java.util.ArrayList" %>
<%@ page import="java.sql.DriverManager" %>
<%@ page import="java.sql.ResultSet" %>
<%@ page import="java.sql.PreparedStatement" %>
<%@ page import="java.sql.Connection" %>
<%@ page import="java.sql.SQLException" %>

<% 
	Connection conn = null;
	PreparedStatement pstmt = null;
	ResultSet rs = null;
%>

<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>my blog</title>
	<script src="list.js"></script>
</head>
<body>
	<div class="wrapper">
		<div class="wrap">
			<div class="top_gnb_area">
				
			</div>
			<div class="top_area">
				<div class="logo_area">

				</div>
				<div class="donate_area">
			
				</div>
				
				<div class="mail_area"></div>
				<div class="login_area">
					<!-- 로그인 안한 상태 -->
					<c:if test = "${memeber == null}">
						<div class="loginBtn"><a href="">로그인</a></div>
						<span><a></a></span>
					</c:if>
				</div>
			</div>	
		</div>
	</div>
	<div>
		<table width="800" border="1" align="center">
			<tr>
			<th>id</th>
			<th>text</th>
			</tr>
		<% 
    	try {
        	Class.forName("oracle.jdbc.driver.OracleDriver");
        	conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "c##systemid", "systempwd");
        	String sql = "SELECT * FROM blog";
        	pstmt = conn.prepareStatement(sql);
        	rs = pstmt.executeQuery();
        
        	while(rs.next()){
            	out.println("<tr>");
            	out.println("<td>" + rs.getInt("seq") + "</td>");
            	out.println("<td>" + rs.getString("text") + "</td>");
            	out.println("</tr>");
        	}
    	} catch(Exception e) {
        	e.printStackTrace();
    	} finally {
        	try {
            	if(rs != null) rs.close();
            	if(pstmt != null) pstmt.close();
            	if(conn != null) conn.close();
        	} catch(Exception e) {
            	e.printStackTrace();
        	}
    	}
		%>
		</table>
	</div>
	<div>
		<button id="insertBtn">추가</button>
	</div>
</body>
</html>

